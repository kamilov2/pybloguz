{% extends 'base.html' %}
{% load static %}
{% block content %}

{% block title %}
    <title>{{obj_name|title}} ga oid maqolalar.</title>
{% endblock %}
    <main>
        <div class="hero">
            <div class="container">
                <div class="section-wrapp">
                    <div class="hero-divider">
                        <div class="hero-sidebar">
                            <div class="hero-sidebar_block">
                                <h1 class="hero-sidebar_heading">
                                    Kun hazili
                                </h1>

                                <a href="{{instagram_post.link}}">
                                    <img class="hero-sidebar_img" src="{{instagram_post.image.url}}" alt="">
                                </a>

                                <div class="hero-sidebar_jk_details">
                                    <div class="hero-sidebar_jk_item">
                                        <i class="fas fa-heart"></i>
                                        +{{instagram_post.likes}}
                                    </div>
                                    <div class="hero-sidebar_jk_item">
                                        <i class="fas fa-paper-plane"></i>
                                        +{{instagram_post.shares}}
                                    </div>
                                    <div class="hero-sidebar_jk_item">
                                        <i class="fas fa-message"></i>
                                        +{{instagram_post.comments}}
                                    </div>
                                </div>

                                <p class="hero-sidebar_link_info">
                                    Yanada ko’proq memlar bizning
                                    <a href="https://www.instagram.com/pyblog.uz/">
                                        <i class="fab fab fa-instagram"></i>
                                        Instagram
                                    </a>

                                    sahifamizda.
                                </p>
                            </div>
                            <!-- Categories  -->
                            <div class="hero-sidebar_block">
                                <div class="hero-sidebar_heading_wrapp">
                                    <h1 class="hero-sidebar_heading">
                                        Ruknlar
                                    </h1>
                                    <i class="fas fa-layer-group"></i>
                                </div>

                                <div class="hero-sidebar_list">
                                    {% for cat in categories %}
                                    <div class="hero-sidebar_item">
                                        <a href="{% url 'blog:category_list' cat.slug %}" title="{{cat.title}} rukniga oid maqolalar.">
                                            <i class="{{cat.icon}}"></i>
                                            {{cat.title}}
                                        </a>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            <div class="hero-sidebar_block">
                                <div class="hero-sidebar_heading_wrapp">
                                    <h1 class="hero-sidebar_heading">
                                        Foydali teglar
                                    </h1>
                                    <i class="fas fa-tags"></i>
                                </div>

                                <div class="hero-sidebar_list">
                                    {% for tag in tags %}
                                    <div class="hero-sidebar_item">
                                        <a href="{% url 'blog:tag_list' tag.slug %}" title="{{tag.title}} tegiga oid maqolalar.">
                                            <i class="{{tag.icon}}"></i>
                                            {{tag.title}}
                                        </a>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>

                                   <!-- Ad  -->
                                   <div class="hero-sidebar_block">
                                    <img class="hero-sidebar_img" src="{% static './assets/images/code.png' %}" alt="Telegram kanal QR kodi" style="width:292px; height:292px;">
                                    <div class="hero-sidebar_ad_info_wrapper">
                                        <h1 class="hero-sidebar_ad_heading">
                                            Telegram kanalimizga qo'shiling!
                                        </h1>
                                        <p class="hero-sidebar_ad_info">
                                            
                                        </p>
                                        <a class="hero-sidebar_ad_link" target="_blank" href="https://t.me/pybloguz">
                                            <i class="fab fa-telegram"></i>
                                            Kanalga o'tish
                                        </a>
                                    </div>
                                </div>
                                <!-- For something  
                                <div class="hero-sidebar_block">
                                    <div class="hero-sidebar_ad_info_wrapper" style="padding: 0px;">
                                        <h1 class="hero-sidebar_ad_heading">
                                            <img src="{{ad_object.image_url}}" alt="Ad image"  style="width:292px; height:292px;">
                                            {{ad_object.title}}
                                        </h1>
                                        <p class="hero-sidebar_ad_info">
                                            {{ad_object.description}}
                                        </p>
                                        <a class="hero-sidebar_ad_link" target="_blank" href="{{ad_object.link}}">Batafsil</a>
                                    </div>
                                </div> -->
                        </div>

                        <div class="hero-content">
                            <div class="hero-tag_cat_detail">
                                <h1 class="hero-tag_cat_detail-heading">{{obj_name|title}}'ga oid maqolalar.</h1>
                                <p class="hero-tag_cat_detail-info_text">
                                    {% if 'category' in request.path %}
                                    Ushbu ruknga oid {{object_list.count}} ta maqola mavjud.
                                    {% else %}
                                    Ushbu tegga oid {{object_list.count}} ta maqola mavjud.
                                    {% endif %}
                                </p>
                            </div>


                            <div class="hero-content_list">

                                {% for post in page_obj %}
                                <div class="hero-content_item">
                                    <div class="hero-content_item_wrapper">
                                        <div class="hero-content_info_wrapper">
                                            <div class="hero-content_top_info">
                                                <a href="{% url 'blog:category_list' post.category.slug %}" class="hero-content_tag" title="{{post.category}} rukniga oid maqolalar.">
                                                    <i class="{{post.category.icon}}"></i>
                                                    {{post.category}}
                                                </a>

                                                <span class="hero-content_date">{{post.published|date:'d-B Y'}}</span>

                                                <span class="hero-content_view">
                                                    <i class="fas fa-eye"></i>
                                                    {{post.views}} marta
                                                </span>
                                            </div>

                                            <h1 class="hero-content_heading">
                                                <a href="{% url 'blog:post_detail' post.slug %}" title="{{post.title}}">
                                                    {{post.title}}
                                                </a>
                                            </h1>

                                            <p class="hero-content_text">{{post.plain|safe}}...</p>
                                        </div>

                                        <a href="{% url 'blog:post_detail' post.slug%}" title="{{post.title}}">
                                            <img class="hero-content_poster_img"
                                                src="{{post.image_url}}" alt="">
                                        </a>
                                    </div>

                                    <div class="hero-content_bottom_info">
                                        <div class="hero-content_bottom_details">
                                            <a href="#" class="hero-content_bottom_detail saving saved">
                                                <i class="fa-regular fa-face-laugh-wink"></i>
                                                <span>{{post.get_all_reaction_count}}</span>

                                                <div class="hero-content_bottom_detail_tooltip">
                                                    Reaksiyalar bildirganlar !
                                                </div>
                                            </a>

                                            <a href="#" class="hero-content_bottom_detail">
                                                <i class="fa-regular fa-comment"></i>
                                                <span>
                                                    {{post.get_comments_count}}
                                                </span>
                                            </a>
                                        </div>

                                        <div class="hero-content_bottom_emoji_list">
                                            <span class="hero-content_bottom_emoji_item">
                                                <p class="hero-content_bottom_emoji_title">
                                                    +{{post.good}}
                                                </p>
                                                <img onclick="postReact({{post.id}}, 'good')" src="{% static './assets/emojies/thumbs_up.png' %}" width="32" height="32" alt="👍">
                                            </span>

                                            <span class="hero-content_bottom_emoji_item">
                                                <p class="hero-content_bottom_emoji_title">
                                                    +{{post.like}}
                                                </p>
                                                <img onclick="postReact({{post.id}}, 'like')" src="{% static './assets/emojies/heart.png' %}" width="32" height="32" alt="❤">
                                            </span>

                                            <span class="hero-content_bottom_emoji_item">
                                                <p class="hero-content_bottom_emoji_title">
                                                    +{{post.great}}
                                                </p>
                                                <img onclick="postReact({{post.id}}, 'great')" src="{% static './assets/emojies/sunglass_face.png' %}" width="32" height="32" alt="😎">
                                            </span>

                                            <span class="hero-content_bottom_emoji_item">
                                                <p class="hero-content_bottom_emoji_title">
                                                    +{{post.fire}}
                                                </p>
                                                <img onclick="postReact({{post.id}}, 'fire')" src="{% static './assets/emojies/fire.png' %}" width="32" height="32" alt="💥">
                                            </span>

                                            <span class="hero-content_bottom_emoji_item">
                                                <p class="hero-content_bottom_emoji_title">
                                                    +{{post.legend}}
                                                </p>
                                                <img onclick="postReact({{post.id}}, 'legend')" src="{% static './assets/emojies/alien.png' %}" width="32" height="32" alt="👽">
                                            </span>

                                            <span class="hero-content_bottom_emoji_item">
                                                <p class="hero-content_bottom_emoji_title">
                                                    +{{post.neutral}}
                                                </p>
                                                <img onclick="postReact({{post.id}}, 'neutral')" src="{% static './assets/emojies/neutral_face.png' %}" width="32" height="32" alt="😐">
                                            </span>

                                            <span class="hero-content_bottom_emoji_item">
                                                <p class="hero-content_bottom_emoji_title">
                                                    +{{post.dislike}}
                                                </p>
                                                <img onclick="postReact({{post.id}}, 'dislike')" src="{% static './assets/emojies/thumbs_down.png' %}" width="32" height="32" alt="👎">
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                {% empty %}
                                <div class="hero-content_item" style="display:flex; align-items:center; flex-direction:column; gap:15px;">
                                    <h4 class="hero-sidebar_heading">Hozircha maqolalar mavjud emas !</h4>
                                    <img width="100" src="{% static 'assets/images/404.svg' %}">
                                </div>
                                {% endfor %}
                              
                                {% if page_obj %}
                                <div class="hero-content_pagination_list">
                                    {% if page_obj.has_previous %}
                                    <!-- Agar page oldingi bolmasa "disabled" classni qoshing -->
                                    <a href="?page={{page_obj.previous_page_number}}" class="hero-content_pagination_item">
                                        <i class="fas fa-chevron-left"></i>
                                    </a>
                                    {% else %}
                                    <a href="#" class="hero-content_pagination_item disabled">
                                        <i class="fas fa-chevron-left"></i>
                                    </a>
                                    {% endif %}

                                    <div class="hero-content_pagination_numbers">
                                        {% for page in page_obj.paginator.page_range|slice:':7' %}
                                        <a href="?page={{page}}" class="{% if page == page_obj.number %}selected{% endif %}  hero-content_pagination_item">
                                            {{page}}
                                        </a>
                                        {% endfor %}

                                        <a href="#" class="hero-content_pagination_item">
                                            ...
                                        </a>
                                        {% for page in page_obj.paginator.page_range|slice:'-2:' %}
                                        <a href="?page={{page}}" class="{% if page == page_obj.number %}selected{% endif %}  hero-content_pagination_item">
                                            {{page}}
                                        </a>
                                        {% endfor %}
                                    </div>
                                    {% if page_obj.has_next  %}
                                    <a href="?page={{page_obj.next_page_number}}" class="hero-content_pagination_item">
                                        <i class="fas fa-chevron-right"></i>
                                    </a>
                                    {% endif %}
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="message active">
            <p class="message_info">Saqlab olindi !</p>
            <i class="fas fa-xmark" onclick="clearMessage(this)"></i>
        </div>
    </main>
{% endblock %}